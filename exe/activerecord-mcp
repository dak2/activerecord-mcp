# #!/usr/bin/env ruby

if defined?(Bundler) && !defined?(Bundler::ORIGINAL_ENV)
  require "bundler/setup"
  Bundler::ORIGINAL_ENV = ENV.to_h
end

require 'bundler/inline'
require "fast_mcp"
require_relative "../lib/activerecord-mcp"

ActiveRecordMcp.configuration do |config|
  config.projects_root_file_path = File.join(ENV["PROJECTS_ROOT_FILE_PATH"])
  config.projects_models_file_path = "/models"
  config.projects_db_file_path = "/db"
end

server = FastMcp::Server.new(name: "activerecord-mcp", version: ActiveRecordMcp::VERSION)
server.register_tools(ActiveRecordMcp::Tools::FetchRecords)
server.start
